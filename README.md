# Primitive Database

Простая система управления базами данных для командной строки.

## Установка

```bash
make install
```

## Запуск

```bash
make project
```

## Справка

- `help` - справочная информация
- `exit` - выйти из программы

## Управление таблицами

- `create_table <имя_таблицы> <столбец1:тип> <столбец2:тип> ..` - создать таблицу
- `list_tables` - показать список всех таблиц
- `drop_table <имя_таблицы>` - удалить таблицу

## CRUD операции

### Создание записей (Create)
- `insert into <имя_таблицы> values (<значение1>, <значение2>, ...)` - добавить новую запись

### Чтение записей (Read)
- `select from <имя_таблицы>` - показать все записи в таблице
- `select from <имя_таблицы> where <столбец> = <значение>` - показать записи по условию

### Обновление записей (Update)
- `update <имя_таблицы> set <столбец1> = <новое_значение1> where <столбец_условия> = <значение_условия>` - обновить записи по условию
- `update <имя_таблицы> set <столбец1> = <новое_значение1>` - обновить все записи в таблице

### Удаление записей (Delete)
- `delete from <имя_таблицы> where <столбец> = <значение>` - удалить записи по условию

### Информация о таблице
- `info <имя_таблицы>` - вывести информацию о таблице (столбцы и количество записей)

## Поддерживаемые типы данных

- `int` - целые числа
- `str` - строки
- `bool` - булевы значения

## Декораторы

В проекте реализована система декораторов для улучшения функциональности и безопасности операций с базой данных:

### `@handle_db_errors`
Обрабатывает стандартные исключения базы данных:
- `KeyError` - ошибки доступа к данным
- `ValueError` - ошибки значений
- `FileNotFoundError` - ошибки работы с файлами

### `@confirm_action(action_name)`
Запрашивает подтверждение пользователя перед выполнением критических операций:
- Используется для операций удаления таблиц и строк
- Пользователь должен ввести "y" для подтверждения действия

### `@log_time`
Измеряет и выводит время выполнения функции:
- Показывает точное время выполнения в секундах
- Помогает в отладке и оптимизации производительности

### `create_cacher()`
Создает функцию для кэширования результатов:
- Хранит результаты вычислений в словаре
- Избегает повторных вычислений для одинаковых запросов

## Пример использования

https://asciinema.org/a/lCtKOLeIhUwhMzQPKobr84kEF

https://asciinema.org/a/jrZS3VNpIIv9PXmtopL9vSDxe

### Базовый пример
```
create_table users name:str age:int email:str
list_tables
drop_table users
```

### Пример CRUD операций
```
# Создание таблицы
create_table users name:str age:int email:str

# Добавление записей
insert into users values "Иван", 25, "ivan@example.com"
insert into users values "Мария", 30, "maria@example.com"

# Чтение всех записей
select from users

# Чтение записей по условию
select from users where age = 25

# Обновление записей
update users set age = 26 where name = "Иван"

# Удаление записей
delete from users where age = 30

# Получение информации о таблице
info users
```

### Пример работы декораторов

При выполнении операций удаления система запросит подтверждение:
```
drop_table users
Вы уверены, что хотите выполнить "удаление таблицы"? [y/n]: y
```

При выполнении запросов будет показано время выполнения:
```
select from users where age = 25
Функция select выполнялась за 0.002 секунд
```

Обработка ошибок с помощью декоратора `@handle_db_errors`:
```
select from nonexistent_table
Table nonexistent_table does not exist
```